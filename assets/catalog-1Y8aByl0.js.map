{"version":3,"file":"catalog-1Y8aByl0.js","sources":["../../src/js/catalog.js"],"sourcesContent":["// ===== IMPORTS =====\nimport * as API from '../api/api.js';\nimport { initPagination, renderPagination } from './pagination.js';\n\n// ===== CONFIGURATION =====\nconst CONFIG = {\n  IMAGE_BASE_URL: 'https://image.tmdb.org/t/p/w500',\n  IMAGE_BASE_URL_2X: 'https://image.tmdb.org/t/p/w780',\n  BACKDROP_BASE_URL: 'https://image.tmdb.org/t/p/w1280',\n  BACKDROP_BASE_URL_2X: 'https://image.tmdb.org/t/p/w1920',\n  IMAGE_PLACEHOLDER: 'src/images/no-poster.svg',\n};\n\n// ===== DOM ELEMENTS CACHE =====\nlet DOM;\n\n// ===== APPLICATION STATE =====\nconst AppState = {\n  lastSearch: { input: '', year: '', isSearch: false },\n  genresCache: [],\n};\n\n// ===== UTILITY FUNCTIONS =====\nfunction extractYear(releaseDate) {\n  return releaseDate ? releaseDate.split('-')[0] : '—';\n}\n\nfunction getImageUrl(posterPath) {\n  if (!posterPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const baseUrl =\n    window.devicePixelRatio > 1\n      ? CONFIG.IMAGE_BASE_URL_2X\n      : CONFIG.IMAGE_BASE_URL;\n  return baseUrl + posterPath;\n}\n\nfunction getImageSrcset(posterPath) {\n  if (!posterPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const smallUrl = CONFIG.IMAGE_BASE_URL.replace('/w500', '/w300') + posterPath;\n  const largeUrl = CONFIG.IMAGE_BASE_URL + posterPath;\n  return `${smallUrl} 1x, ${largeUrl} 2x`;\n}\n\nfunction getBackdropUrl(backdropPath) {\n  if (!backdropPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const baseUrl =\n    window.devicePixelRatio > 1\n      ? CONFIG.BACKDROP_BASE_URL_2X\n      : CONFIG.BACKDROP_BASE_URL;\n  return baseUrl + backdropPath;\n}\n\n// ===== ERROR HANDLING =====\nfunction showErrorMessage(message, type = 'error') {\n  const errorDiv = document.createElement('div');\n  errorDiv.className = `error-message ${type}`;\n  errorDiv.textContent = message;\n  errorDiv.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(20, 20, 20, 0.95) 100%);\n    color: white;\n    padding: 16px 24px;\n    border-radius: 12px;\n    z-index: 10000;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    font-weight: 500;\n  `;\n\n  document.body.appendChild(errorDiv);\n  setTimeout(() => errorDiv.remove(), 5000);\n}\n\n// ===== RENDERING FUNCTIONS =====\nfunction renderStarRating(voteAverage, container) {\n  if (!container) return;\n\n  const rating = voteAverage / 2;\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating - fullStars >= 0.5;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  // Render full stars\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star\"><use xlink:href=\"../images/symbol-defs.svg#icon-star\"></use></svg>';\n  }\n\n  // Render half star if needed\n  if (hasHalfStar) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star-half\"><use xlink:href=\"../images/symbol-defs.svg#icon-star-half\"></use></svg>';\n  }\n\n  // Render empty stars\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star-empty\"><use xlink:href=\"../images/symbol-defs.svg#icon-star-empty\"></use></svg>';\n  }\n\n  container.innerHTML = starsHTML;\n}\n\nfunction renderHeroSection(movie) {\n  const heroSection = document.getElementById('hero');\n  if (!heroSection) return;\n\n  // Use backdrop image for better quality, fallback to poster if no backdrop\n  const bgUrl = movie.backdrop_path\n    ? getBackdropUrl(movie.backdrop_path)\n    : getImageUrl(movie.poster_path);\n\n  // Preload high-quality image\n  const img = new Image();\n  img.onload = function () {\n    heroSection.style.backgroundImage = `url(${bgUrl})`;\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroSection.style.backgroundAttachment = 'fixed';\n    heroSection.style.transition = 'background-image 0.3s ease';\n  };\n  img.src = bgUrl;\n\n  DOM.heroContent.innerHTML = `\n    <div class=\"hero-info\">\n      <h2 class=\"hero-title\">${movie.title}</h2>\n      <div class=\"rating-stars\" id=\"hero-rating-stars\"></div>\n      <p class=\"hero-overview\">${movie.overview || 'No overview available.'}</p>\n      <div class=\"hero-actions\">\n        <button class=\"btn trailer-btn\" data-id=\"${\n          movie.id\n        }\" aria-label=\"Trailer for ${movie.title}\">\n          Watch trailer\n        </button>\n        <button class=\"btn details-btn\" data-id=\"${\n          movie.id\n        }\" aria-label=\"More details for ${movie.title}\">\n          More details\n        </button>\n      </div>\n    </div>\n  `;\n\n  const heroStarsContainer = document.getElementById('hero-rating-stars');\n  renderStarRating(movie.vote_average || 0, heroStarsContainer);\n}\n\nfunction renderMoviesList(movies) {\n  DOM.moviesUl.innerHTML = '';\n\n  if (!movies || movies.length === 0) {\n    DOM.moviesUl.innerHTML = `\n    <li></li>\n      <li class=\"message\" role=\"status\">\n        <div class=\"error-message-content\">\n          <div>OOPS...</div>\n          <div>We are very sorry!</div>\n          <div>We don't have any results matching your search.</div>\n        </div>\n      </li>\n    `;\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n  movies.forEach(movie => {\n    const movieCard = createMovieCard(movie);\n    fragment.appendChild(movieCard);\n  });\n  DOM.moviesUl.appendChild(fragment);\n}\n\nfunction createMovieCard(movie) {\n  const li = document.createElement('li');\n  li.className = 'movie-card';\n\n  // Process genres\n  let genresText = '';\n  if (movie.genres && movie.genres.length > 0) {\n    genresText = movie.genres.map(g => g.name).join(', ');\n  } else if (movie.genre_ids && movie.genre_ids.length > 0) {\n    const genreNames = movie.genre_ids\n      .map(id => {\n        const genre = AppState.genresCache.find(g => g.id === id);\n        return genre ? genre.name : '';\n      })\n      .filter(name => name !== '')\n      .slice(0, 2);\n    genresText = genreNames.join(', ');\n  }\n\n  const releaseYear = extractYear(movie.release_date);\n  const genreAndYear = genresText\n    ? `${genresText} | ${releaseYear}`\n    : releaseYear;\n\n  li.innerHTML = `\n    <div class=\"movie-poster\">\n      <img src=\"${getImageUrl(movie.poster_path)}\"\n           alt=\"${movie.title} poster\"\n           loading=\"lazy\"\n           srcset=\"${getImageSrcset(movie.poster_path)}\" />\n    </div>\n    <div class=\"movie-info\">\n      <div class=\"movie-info-left\">\n        <div class=\"movie-title\">${movie.title}</div>\n        <div class=\"movie-meta\">${genreAndYear}</div>\n      </div>\n      <div class=\"movie-info-right\">\n        <div class=\"catalog-rating-stars\"></div>\n      </div>\n    </div>\n  `;\n\n  const starsContainer = li.querySelector('.catalog-rating-stars');\n  renderStarRating(movie.vote_average || 0, starsContainer);\n\n  return li;\n}\n\n// ===== MODAL FUNCTIONS =====\nfunction renderTrailerModal(videoKey, title) {\n  const modal = document.createElement('div');\n  modal.className = 'movie-modal';\n\n  modal.innerHTML = `\n    <div class=\"modal-content\">\n      <span class=\"close-modal\" aria-label=\"Close modal\">&times;</span>\n      <div class=\"trailer-container\">\n        <iframe\n          width=\"100%\"\n          height=\"450\"\n          src=\"https://www.youtube.com/embed/${videoKey}?autoplay=1\"\n          title=\"${title} trailer\"\n          frameborder=\"0\"\n          allow=\"autoplay; encrypted-media\"\n          allowfullscreen>\n        </iframe>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(modal);\n  setupModalEventListeners(modal);\n}\n\nasync function renderMovieDetailsModal(movieId) {\n  try {\n    const [movie, videosData] = await Promise.all([\n      API.fetchMovieDetails(movieId),\n      API.fetchMovieVideos(movieId),\n    ]);\n\n    const videos = videosData?.results || [];\n    const trailers = videos.filter(\n      video => video.site === 'YouTube' && video.type === 'Trailer'\n    );\n    const trailer = trailers.length ? trailers[0] : null;\n\n    const genres = movie.genres?.length\n      ? movie.genres.map(g => g.name).join(', ')\n      : '—';\n\n    const modal = document.createElement('div');\n    modal.className = 'movie-modal';\n\n    modal.innerHTML = `\n      <div class=\"modal-content\">\n        <span class=\"close-modal\" aria-label=\"Close modal\">&times;</span>\n\n        <div class=\"modal-header\">\n          <img src=\"${getImageUrl(movie.poster_path)}\" \n               alt=\"${movie.title} poster\"\n               loading=\"lazy\"\n               srcset=\"${getImageSrcset(movie.poster_path)}\" />\n\n          <div class=\"modal-info\">\n            <h2>${movie.title}</h2>\n            <p><strong>Release:</strong> ${extractYear(movie.release_date)}</p>\n            <p><strong>Genres:</strong> ${genres}</p>\n            <p><strong>Rating:</strong> ${\n              movie.vote_average ? movie.vote_average.toFixed(1) : 'No rating'\n            }</p>\n          </div>\n        </div>\n\n        <div class=\"modal-body\">\n          <h3>Overview</h3>\n          <p>${movie.overview || 'No overview available.'}</p>\n\n          ${\n            trailer\n              ? `\n            <div class=\"trailer-container\">\n              <h3>Trailer</h3>\n              <iframe\n                width=\"100%\"\n                height=\"400\"\n                src=\"https://www.youtube.com/embed/${trailer.key}\"\n                title=\"${movie.title} trailer\"\n                frameborder=\"0\"\n                allow=\"autoplay; encrypted-media\"\n                allowfullscreen>\n              </iframe>\n            </div>\n          `\n              : ''\n          }\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(modal);\n    setupModalEventListeners(modal);\n  } catch (error) {\n    console.error('Error loading movie details:', error);\n    showErrorMessage('Error loading movie details.');\n  }\n}\n\nfunction setupModalEventListeners(modal) {\n  const closeBtn = modal.querySelector('.close-modal');\n  closeBtn.addEventListener('click', () => modal.remove());\n\n  modal.addEventListener('click', e => {\n    if (e.target === modal) modal.remove();\n  });\n}\n\n// ===== MAIN FUNCTIONS =====\nasync function loadTrendingMovies(page = 1) {\n  try {\n    DOM.movieListRegion.setAttribute('aria-busy', 'true');\n\n    const data = await API.fetchTrendingWeek(page);\n\n    // Only render hero section if hero content exists (may be deactivated)\n    if (DOM.heroContent && page === 1) {\n      const firstMovie = data.results?.[0];\n      if (firstMovie) {\n        renderHeroSection(firstMovie);\n      } else {\n        DOM.heroContent.innerHTML = `\n          <div class=\"hero-fall-back\" style=\"\n            text-align: center; \n            padding: 4rem 2rem; \n            background: rgba(0, 0, 0, 0.8); \n            color: #ffffff; \n            font-family: 'Roboto', sans-serif;\n            line-height: 1.6;\n            border-radius: 12px;\n            backdrop-filter: blur(10px);\n          \">\n            <div style=\"font-size: 1.5rem; font-weight: 400; margin-bottom: 0.5rem;\">OOPS...</div>\n            <div style=\"font-size: 1.2rem; font-weight: 400; margin-bottom: 0.5rem;\">We are very sorry!</div>\n            <div style=\"font-size: 1rem; font-weight: 300; opacity: 0.9;\">We don't have any results matching your search.</div>\n          </div>\n        `;\n      }\n    }\n\n    const movies = data.results || [];\n    renderMoviesList(movies);\n    renderPagination(page, data.total_pages || 1);\n\n    AppState.lastSearch = { input: '', year: '', isSearch: false };\n  } catch (error) {\n    console.error('Error loading trending movies:', error);\n    showErrorMessage('Failed to load trending movies. Please try again later.');\n  } finally {\n    DOM.movieListRegion.removeAttribute('aria-busy');\n  }\n}\n\nasync function performMovieSearch(query, year = '', page = 1) {\n  if (!query || query.trim() === '') {\n    return loadTrendingMovies();\n  }\n\n  try {\n    DOM.movieListRegion.setAttribute('aria-busy', 'true');\n\n    const data = await API.searchMovies(query.trim(), year, page);\n\n    const movies = data.results || [];\n    renderMoviesList(movies);\n    renderPagination(page, data.total_pages || 1);\n\n    AppState.lastSearch = { input: query, year: year, isSearch: true };\n  } catch (error) {\n    console.error('Error performing search:', error);\n    showErrorMessage('Search failed. Please try again.');\n  } finally {\n    DOM.movieListRegion.removeAttribute('aria-busy');\n  }\n}\n\nfunction handlePageChange(page) {\n  if (AppState.lastSearch.isSearch) {\n    performMovieSearch(\n      AppState.lastSearch.input,\n      AppState.lastSearch.year,\n      page\n    );\n  } else {\n    loadTrendingMovies(page);\n  }\n\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nasync function handleTrailerClick(movieId) {\n  try {\n    const videosData = await API.fetchMovieVideos(movieId);\n    const videos = videosData?.results || [];\n    const trailers = videos.filter(\n      video => video.site === 'YouTube' && video.type === 'Trailer'\n    );\n\n    if (!trailers.length) {\n      showErrorMessage('No trailer available for this movie.', 'warning');\n      return;\n    }\n\n    const trailer = trailers[0];\n    renderTrailerModal(trailer.key, trailer.name || 'Trailer');\n  } catch (error) {\n    console.error('Error loading trailer:', error);\n    showErrorMessage('Error loading trailer.');\n  }\n}\n\nasync function handleDetailsClick(movieId) {\n  try {\n    await renderMovieDetailsModal(movieId);\n  } catch (error) {\n    console.error('Error loading movie details:', error);\n    showErrorMessage('Error loading movie details.');\n  }\n}\n\n// ===== EVENT LISTENERS =====\nfunction setupEventListeners() {\n  // Movie action buttons (works for modal buttons too)\n  document.addEventListener('click', async e => {\n    const trailerBtn = e.target.closest('.trailer-btn');\n    if (trailerBtn) {\n      const movieId = trailerBtn.dataset.id;\n      if (movieId) {\n        await handleTrailerClick(movieId);\n      }\n      return;\n    }\n\n    const detailsBtn = e.target.closest('.details-btn');\n    if (detailsBtn) {\n      const movieId = detailsBtn.dataset.id;\n      if (movieId) {\n        await handleDetailsClick(movieId);\n      }\n    }\n  });\n}\n\n// ===== INITIALIZATION =====\nasync function initializeApp() {\n  try {\n    // Initialize DOM elements\n    DOM = {\n      moviesUl: document.getElementById('movies-ul'),\n      heroContent: document.getElementById('hero-content'),\n      movieListRegion: document.getElementById('movie-list'),\n    };\n\n    // Setup event listeners\n    setupEventListeners();\n\n    // Initialize pagination module\n    initPagination(handlePageChange);\n\n    // Fetch genres cache\n    const genresData = await API.fetchGenres();\n    AppState.genresCache = genresData.genres || [];\n\n    // Only render hero section if hero content exists\n    if (DOM.heroContent) {\n      const dayData = await API.fetchTrendingDay();\n      const heroMovie = dayData.results?.[0];\n      if (heroMovie) {\n        renderHeroSection(heroMovie);\n      }\n    }\n\n    // Load initial trending movies\n    await loadTrendingMovies(1);\n  } catch (error) {\n    console.error('Error initializing app:', error);\n    showErrorMessage('Failed to initialize application.');\n  }\n}\n\n// ===== APP STARTUP =====\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initializeApp);\n} else {\n  initializeApp();\n}\n"],"names":["CONFIG","DOM","AppState","extractYear","releaseDate","getImageUrl","posterPath","getImageSrcset","smallUrl","largeUrl","getBackdropUrl","backdropPath","showErrorMessage","message","type","errorDiv","renderStarRating","voteAverage","container","rating","fullStars","hasHalfStar","emptyStars","starsHTML","i","renderHeroSection","movie","heroSection","bgUrl","img","heroStarsContainer","renderMoviesList","movies","fragment","movieCard","createMovieCard","li","genresText","g","id","genre","name","releaseYear","genreAndYear","starsContainer","renderTrailerModal","videoKey","title","modal","setupModalEventListeners","renderMovieDetailsModal","movieId","videosData","API.fetchMovieDetails","API.fetchMovieVideos","trailers","video","trailer","genres","_a","error","e","loadTrendingMovies","page","data","API.fetchTrendingWeek","firstMovie","renderPagination","performMovieSearch","query","year","API.searchMovies","handlePageChange","handleTrailerClick","handleDetailsClick","setupEventListeners","trailerBtn","detailsBtn","initializeApp","initPagination","genresData","API.fetchGenres","heroMovie","API.fetchTrendingDay"],"mappings":"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"}