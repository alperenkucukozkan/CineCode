{"version":3,"file":"catalog-4wSRAYWe.js","sources":["../../src/js/catalog.js"],"sourcesContent":["// ===== IMPORTS =====\nimport * as API from '../api/api.js';\nimport { initPagination, renderPagination } from './pagination.js';\nimport { openModal, closeModal, renderMovieInModal } from './modal.js';\n\n// ===== CONFIGURATION =====\nconst CONFIG = {\n  IMAGE_BASE_URL: 'https://image.tmdb.org/t/p/w500',\n  IMAGE_BASE_URL_2X: 'https://image.tmdb.org/t/p/w780',\n  BACKDROP_BASE_URL: 'https://image.tmdb.org/t/p/w1280',\n  BACKDROP_BASE_URL_2X: 'https://image.tmdb.org/t/p/w1920',\n  IMAGE_PLACEHOLDER: 'src/images/no-poster.svg',\n};\n\n// ===== DOM ELEMENTS CACHE =====\nlet DOM;\n\n// ===== EVENT HANDLERS =====\nlet movieCardClickHandler = null;\n\n// ===== APPLICATION STATE =====\nconst AppState = {\n  lastSearch: { input: '', year: '', isSearch: false },\n  genresCache: [],\n};\n\n// ===== UTILITY FUNCTIONS =====\nfunction extractYear(releaseDate) {\n  return releaseDate ? releaseDate.split('-')[0] : '—';\n}\n\nfunction getImageUrl(posterPath) {\n  if (!posterPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const baseUrl =\n    window.devicePixelRatio > 1\n      ? CONFIG.IMAGE_BASE_URL_2X\n      : CONFIG.IMAGE_BASE_URL;\n  return baseUrl + posterPath;\n}\n\nfunction getImageSrcset(posterPath) {\n  if (!posterPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const smallUrl = CONFIG.IMAGE_BASE_URL.replace('/w500', '/w300') + posterPath;\n  const largeUrl = CONFIG.IMAGE_BASE_URL + posterPath;\n  return `${smallUrl} 1x, ${largeUrl} 2x`;\n}\n\nfunction getBackdropUrl(backdropPath) {\n  if (!backdropPath) return CONFIG.IMAGE_PLACEHOLDER;\n  const baseUrl =\n    window.devicePixelRatio > 1\n      ? CONFIG.BACKDROP_BASE_URL_2X\n      : CONFIG.BACKDROP_BASE_URL;\n  return baseUrl + backdropPath;\n}\n\n// ===== ERROR HANDLING =====\nfunction showErrorMessage(message, type = 'error') {\n  const errorDiv = document.createElement('div');\n  errorDiv.className = `error-message ${type}`;\n  errorDiv.textContent = message;\n  errorDiv.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(20, 20, 20, 0.95) 100%);\n    color: white;\n    padding: 16px 24px;\n    border-radius: 12px;\n    z-index: 10000;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    font-weight: 500;\n  `;\n\n  document.body.appendChild(errorDiv);\n  setTimeout(() => errorDiv.remove(), 5000);\n}\n\n// ===== RENDERING FUNCTIONS =====\nfunction renderStarRating(voteAverage, container) {\n  if (!container) return;\n\n  const rating = voteAverage / 2;\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating - fullStars >= 0.5;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  // Render full stars\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star\"><use xlink:href=\"../images/symbol-defs.svg#icon-star\"></use></svg>';\n  }\n\n  // Render half star if needed\n  if (hasHalfStar) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star-half\"><use xlink:href=\"../images/symbol-defs.svg#icon-star-half\"></use></svg>';\n  }\n\n  // Render empty stars\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML +=\n      '<svg class=\"catalog-icon catalog-icon-star-empty\"><use xlink:href=\"../images/symbol-defs.svg#icon-star-empty\"></use></svg>';\n  }\n\n  container.innerHTML = starsHTML;\n}\n\nfunction renderHeroSection(movie) {\n  const heroSection = document.getElementById('hero');\n  if (!heroSection) return;\n\n  // Use backdrop image for better quality, fallback to poster if no backdrop\n  const bgUrl = movie.backdrop_path\n    ? getBackdropUrl(movie.backdrop_path)\n    : getImageUrl(movie.poster_path);\n\n  // Preload high-quality image\n  const img = new Image();\n  img.onload = function () {\n    heroSection.style.backgroundImage = `url(${bgUrl})`;\n    heroSection.style.backgroundSize = 'cover';\n    heroSection.style.backgroundPosition = 'center';\n    heroSection.style.backgroundRepeat = 'no-repeat';\n    heroSection.style.backgroundAttachment = 'fixed';\n    heroSection.style.transition = 'background-image 0.3s ease';\n  };\n  img.src = bgUrl;\n\n  DOM.heroContent.innerHTML = `\n    <div class=\"hero-info\">\n      <h2 class=\"hero-title\">${movie.title}</h2>\n      <div class=\"rating-stars\" id=\"hero-rating-stars\"></div>\n      <p class=\"hero-overview\">${movie.overview || 'No overview available.'}</p>\n      <div class=\"hero-actions\">\n        <button class=\"btn trailer-btn\" data-id=\"${\n          movie.id\n        }\" aria-label=\"Trailer for ${movie.title}\">\n          Watch trailer\n        </button>\n        <button class=\"btn details-btn\" data-id=\"${\n          movie.id\n        }\" aria-label=\"More details for ${movie.title}\">\n          More details\n        </button>\n      </div>\n    </div>\n  `;\n\n  const heroStarsContainer = document.getElementById('hero-rating-stars');\n  renderStarRating(movie.vote_average || 0, heroStarsContainer);\n}\n\nfunction renderMoviesList(movies) {\n  DOM.moviesUl.innerHTML = '';\n\n  if (!movies || movies.length === 0) {\n    DOM.moviesUl.innerHTML = `\n    <li></li>\n      <li class=\"message\" role=\"status\">\n        <div class=\"error-message-content\">\n          <div>OOPS...</div>\n          <div>We are very sorry!</div>\n          <div>We don't have any results matching your search.</div>\n        </div>\n      </li>\n    `;\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n  movies.forEach(movie => {\n    const movieCard = createMovieCard(movie);\n    fragment.appendChild(movieCard);\n  });\n  DOM.moviesUl.appendChild(fragment);\n}\n\nfunction createMovieCard(movie) {\n  const li = document.createElement('li');\n  li.className = 'movie-card';\n  li.dataset.id = movie.id;\n  li.style.cursor = 'pointer';\n\n  // Process genres\n  let genresText = '';\n  if (movie.genres && movie.genres.length > 0) {\n    genresText = movie.genres.map(g => g.name).join(', ');\n  } else if (movie.genre_ids && movie.genre_ids.length > 0) {\n    const genreNames = movie.genre_ids\n      .map(id => {\n        const genre = AppState.genresCache.find(g => g.id === id);\n        return genre ? genre.name : '';\n      })\n      .filter(name => name !== '')\n      .slice(0, 2);\n    genresText = genreNames.join(', ');\n  }\n\n  const releaseYear = extractYear(movie.release_date);\n  const genreAndYear = genresText\n    ? `${genresText} | ${releaseYear}`\n    : releaseYear;\n\n  li.innerHTML = `\n    <div class=\"movie-poster\">\n      <img src=\"${getImageUrl(movie.poster_path)}\"\n           alt=\"${movie.title} poster\"\n           loading=\"lazy\"\n           srcset=\"${getImageSrcset(movie.poster_path)}\" />\n    </div>\n    <div class=\"movie-info\">\n      <div class=\"movie-info-left\">\n        <div class=\"movie-title\">${movie.title}</div>\n        <div class=\"movie-meta\">${genreAndYear}</div>\n      </div>\n      <div class=\"movie-info-right\">\n        <div class=\"catalog-rating-stars\"></div>\n      </div>\n    </div>\n  `;\n\n  const starsContainer = li.querySelector('.catalog-rating-stars');\n  renderStarRating(movie.vote_average || 0, starsContainer);\n\n  return li;\n}\n\n// ===== MAIN FUNCTIONS =====\nasync function loadTrendingMovies(page = 1) {\n  try {\n    DOM.movieListRegion.setAttribute('aria-busy', 'true');\n\n    const data = await API.fetchTrendingWeek(page);\n\n    // Only render hero section if hero content exists (may be deactivated)\n    if (DOM.heroContent && page === 1) {\n      const firstMovie = data.results?.[0];\n      if (firstMovie) {\n        renderHeroSection(firstMovie);\n      } else {\n        DOM.heroContent.innerHTML = `\n          <div class=\"hero-fall-back\" style=\"\n            text-align: center; \n            padding: 4rem 2rem; \n            background: rgba(0, 0, 0, 0.8); \n            color: #ffffff; \n            font-family: 'Roboto', sans-serif;\n            line-height: 1.6;\n            border-radius: 12px;\n            backdrop-filter: blur(10px);\n          \">\n            <div style=\"font-size: 1.5rem; font-weight: 400; margin-bottom: 0.5rem;\">OOPS...</div>\n            <div style=\"font-size: 1.2rem; font-weight: 400; margin-bottom: 0.5rem;\">We are very sorry!</div>\n            <div style=\"font-size: 1rem; font-weight: 300; opacity: 0.9;\">We don't have any results matching your search.</div>\n          </div>\n        `;\n      }\n    }\n\n    const movies = data.results || [];\n    renderMoviesList(movies);\n    renderPagination(page, data.total_pages || 1);\n\n    AppState.lastSearch = { input: '', year: '', isSearch: false };\n  } catch (error) {\n    console.error('Error loading trending movies:', error);\n    showErrorMessage('Failed to load trending movies. Please try again later.');\n  } finally {\n    DOM.movieListRegion.removeAttribute('aria-busy');\n  }\n}\n\nasync function performMovieSearch(query, year = '', page = 1) {\n  if (!query || query.trim() === '') {\n    return loadTrendingMovies();\n  }\n\n  try {\n    DOM.movieListRegion.setAttribute('aria-busy', 'true');\n\n    const data = await API.searchMovies(query.trim(), year, page);\n\n    const movies = data.results || [];\n    renderMoviesList(movies);\n    renderPagination(page, data.total_pages || 1);\n\n    AppState.lastSearch = { input: query, year: year, isSearch: true };\n  } catch (error) {\n    console.error('Error performing search:', error);\n    showErrorMessage('Search failed. Please try again.');\n  } finally {\n    DOM.movieListRegion.removeAttribute('aria-busy');\n  }\n}\n\nfunction handlePageChange(page) {\n  if (AppState.lastSearch.isSearch) {\n    performMovieSearch(\n      AppState.lastSearch.input,\n      AppState.lastSearch.year,\n      page\n    );\n  } else {\n    loadTrendingMovies(page);\n  }\n\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\n// ===== MODAL HELPERS =====\nasync function handleDetailsClick(movieId) {\n  try {\n    const movie = await API.fetchMovieDetails(movieId);\n    renderMovieInModal(movie);\n    openModal();\n  } catch (e) {\n    console.error(e);\n    showErrorMessage('Movie details could not be loaded.');\n  }\n}\n\nasync function handleTrailerClick(movieId) {\n  try {\n    const data = await API.fetchMovieVideos(movieId);\n    const trailer = data.results?.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n    if (trailer) {\n      // Open trailer in new window/tab\n      window.open(`https://www.youtube.com/watch?v=${trailer.key}`, '_blank');\n    } else {\n      showErrorMessage('Trailer not available.');\n    }\n  } catch (e) {\n    console.error(e);\n    showErrorMessage('Error fetching trailer.');\n  }\n}\n\n// ===== EVENT LISTENERS =====\nfunction setupEventListeners() {\n  // Önceki handler'ı kaldır (eğer varsa)\n  if (movieCardClickHandler) {\n    DOM.moviesUl.removeEventListener('click', movieCardClickHandler);\n  }\n\n  // Movie card click handler'ını tanımla\n  movieCardClickHandler = async e => {\n    const card = e.target.closest('.movie-card');\n    if (!card) return;\n\n    const movieId = card.dataset.id;\n    if (!movieId) return;\n\n    try {\n      const movie = await API.fetchMovieDetails(movieId);\n      renderMovieInModal(movie);\n      openModal();\n    } catch (err) {\n      console.error('Modal açılırken hata:', err);\n      showErrorMessage('Film detayları yüklenemedi.');\n    }\n  };\n\n  // Yeni handler'ı ekle\n  DOM.moviesUl.addEventListener('click', movieCardClickHandler);\n\n  // Movie action buttons (hero section'daki trailer ve details butonları için)\n  document.addEventListener('click', async e => {\n    const trailerBtn = e.target.closest('.trailer-btn');\n    if (trailerBtn) return handleTrailerClick(trailerBtn.dataset.id);\n\n    const detailsBtn = e.target.closest('.details-btn');\n    if (detailsBtn) return handleDetailsClick(detailsBtn.dataset.id);\n  });\n}\n\n// ===== INITIALIZATION =====\nasync function initializeApp() {\n  try {\n    // Initialize DOM elements\n    DOM = {\n      moviesUl: document.getElementById('movies-ul'),\n      heroContent: document.getElementById('hero-content'),\n      movieListRegion: document.getElementById('movie-list'),\n    };\n\n    // Setup event listeners\n    setupEventListeners();\n\n    // Initialize pagination module\n    initPagination(handlePageChange);\n\n    // Fetch genres cache\n    const genresData = await API.fetchGenres();\n    AppState.genresCache = genresData.genres || [];\n\n    // Only render hero section if hero content exists\n    if (DOM.heroContent) {\n      const dayData = await API.fetchTrendingDay();\n      const heroMovie = dayData.results?.[0];\n      if (heroMovie) {\n        renderHeroSection(heroMovie);\n      }\n    }\n\n    // Load initial trending movies\n    await loadTrendingMovies(1);\n  } catch (error) {\n    console.error('Error initializing app:', error);\n    showErrorMessage('Failed to initialize application.');\n  }\n}\n\n// ===== APP STARTUP =====\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initializeApp);\n} else {\n  initializeApp();\n}\n"],"names":["CONFIG","DOM","movieCardClickHandler","AppState","extractYear","releaseDate","getImageUrl","posterPath","getImageSrcset","smallUrl","largeUrl","getBackdropUrl","backdropPath","showErrorMessage","message","type","errorDiv","renderStarRating","voteAverage","container","rating","fullStars","hasHalfStar","emptyStars","starsHTML","i","renderHeroSection","movie","heroSection","bgUrl","img","heroStarsContainer","renderMoviesList","movies","fragment","movieCard","createMovieCard","li","genresText","g","id","genre","name","releaseYear","genreAndYear","starsContainer","loadTrendingMovies","page","data","API.fetchTrendingWeek","firstMovie","_a","renderPagination","error","performMovieSearch","query","year","API.searchMovies","handlePageChange","handleDetailsClick","movieId","API.fetchMovieDetails","renderMovieInModal","openModal","e","handleTrailerClick","trailer","API.fetchMovieVideos","v","setupEventListeners","card","err","trailerBtn","detailsBtn","initializeApp","initPagination","genresData","API.fetchGenres","heroMovie","API.fetchTrendingDay"],"mappings":"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"}