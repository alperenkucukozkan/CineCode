{"version":3,"file":"hero-C9aT-gH_.js","sources":["../../src/js/hero.js"],"sourcesContent":["import {\n  fetchDailyTrending,\n  fetchMovieDetails,\n  fetchMovieVideos\n} from '../api/api.js';\n// import { Modal } from './modal.js'; \n\nconst IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/original';\n\nasync function initHeroSection() {\n  const heroRoot = document.getElementById('hero-x');\n  if (!heroRoot) return;\n\n  try {\n    const data = await fetchDailyTrending();\n    const movies = Array.isArray(data?.data?.results)\n      ? data.data.results\n      : (data?.results || []);\n\n    if (!movies.length) {\n      renderDefaultHero(heroRoot);\n      return;\n    }\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    renderMovieHero(heroRoot, randomMovie);\n  } catch (err) {\n    console.error('Movie init error:', err);\n    renderDefaultHero(heroRoot);\n  }\n}\n\nfunction renderMovieHero(container, movie) {\n  container.innerHTML = `\n    <div class=\"hero-bg\" style=\"background-image:url('${IMAGE_BASE_URL}${movie.backdrop_path || movie.poster_path || ''}')\"></div>\n    <div class=\"hero-scrim\"></div>\n\n    <div class=\"hero-inner\">\n      <h2 class=\"hero-title\">${movie.title ?? movie.name ?? 'Untitled'}</h2>\n      <p class=\"hero-sub\">\n        ${movie.overview || 'No description available.'}\n      </p>\n\n      <div class=\"hero-ctas\">\n        <button class=\"btn-play\" id=\"play-trailer-btn\">Play Trailer</button>\n        <button class=\"btn-info\" id=\"more-info-btn\">More Info</button>\n        <span class=\"hero-rating\">⭐ ${movie.vote_average != null ? Number(movie.vote_average).toFixed(1) : 'N/A'}</span>\n      </div>\n    </div>\n  `;\n\n  // ID çakışması olmasın diye container scope'undan seç\n  const trailerBtn = container.querySelector('#play-trailer-btn');\n  const detailsBtn = container.querySelector('#more-info-btn');\n\n  trailerBtn?.addEventListener('click', () => playTrailer(movie.id));\n  detailsBtn?.addEventListener('click', () => showMovieDetails(movie.id));\n}\n\nfunction renderDefaultHero(container) {\n  container.innerHTML = `\n    <div class=\"hero-bg\" style=\"background-image:linear-gradient(90deg,#000,#111)\"></div>\n    <div class=\"hero-scrim\"></div>\n\n    <div class=\"hero-inner\">\n      <h2 class=\"hero-title\">Let's Make Your Own Cinema</h2>\n      <p class=\"hero-sub\">\n        A guide to creating a personalized movie experience.\n        Decorate your space, choose your films, and enjoy the show!\n      </p>\n\n      <div class=\"hero-ctas\">\n        <a href=\"../catalog.html\" class=\"btn-play\">Get Started</a>\n      </div>\n    </div>\n  `;\n}\n\nasync function playTrailer(movieId) {\n  try {\n    const data = await fetchMovieVideos(movieId);\n    const results = Array.isArray(data?.data?.results) ? data.data.results : data?.results;\n    const trailer = results?.find(v => v.type === 'Trailer' && v.site === 'YouTube');\n    if (trailer) {\n      Modal.showTrailer(trailer.key);     // <-- basicLightbox\n    } else {\n      Modal.showMessage('Trailer not available.', 'Info');\n    }\n  } catch (err) {\n    console.error('Play trailer error:', err);\n    Modal.showMessage('Error fetching trailer.', 'Error');\n  }\n}\n\nasync function showMovieDetails(movieId) {\n  try {\n    const res = await fetchMovieDetails(movieId);\n    const movie = res?.data ?? res;\n    Modal.renderMovie(movie);             // <-- tek çağrı, kendi kendine açar\n  } catch (err) {\n    console.error('Movie details error:', err);\n    Modal.showMessage('Movie details could not be loaded.', 'Error');\n  }\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('partials:loaded', initHeroSection, { once: true });\n} else {\n  initHeroSection();\n}"],"names":["IMAGE_BASE_URL","initHeroSection","heroRoot","data","fetchDailyTrending","movies","_a","renderDefaultHero","randomMovie","renderMovieHero","err","container","movie","trailerBtn","detailsBtn","playTrailer","showMovieDetails","movieId","fetchMovieVideos","results","trailer","v","res","fetchMovieDetails"],"mappings":"oDAOA,MAAMA,EAAiB,sCAEvB,eAAeC,GAAkB,OAC/B,MAAMC,EAAW,SAAS,eAAe,QAAQ,EACjD,GAAKA,EAEL,GAAI,CACF,MAAMC,EAAO,MAAMC,IACbC,EAAS,MAAM,SAAQC,EAAAH,GAAA,YAAAA,EAAM,OAAN,YAAAG,EAAY,OAAO,EAC5CH,EAAK,KAAK,SACTA,GAAA,YAAAA,EAAM,UAAW,CAAA,EAEtB,GAAI,CAACE,EAAO,OAAQ,CAClBE,EAAkBL,CAAQ,EAC1B,MACD,CAED,MAAMM,EAAcH,EAAO,KAAK,MAAM,KAAK,SAAWA,EAAO,MAAM,CAAC,EACpEI,EAAgBP,EAAUM,CAAW,CACtC,OAAQE,EAAK,CACZ,QAAQ,MAAM,oBAAqBA,CAAG,EACtCH,EAAkBL,CAAQ,CAC3B,CACH,CAEA,SAASO,EAAgBE,EAAWC,EAAO,CACzCD,EAAU,UAAY;AAAA,wDACgCX,CAAc,GAAGY,EAAM,eAAiBA,EAAM,aAAe,EAAE;AAAA;AAAA;AAAA;AAAA,+BAIxFA,EAAM,OAASA,EAAM,MAAQ,UAAU;AAAA;AAAA,UAE5DA,EAAM,UAAY,2BAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAMjBA,EAAM,cAAgB,KAAO,OAAOA,EAAM,YAAY,EAAE,QAAQ,CAAC,EAAI,KAAK;AAAA;AAAA;AAAA,IAM9G,MAAMC,EAAaF,EAAU,cAAc,mBAAmB,EACxDG,EAAaH,EAAU,cAAc,gBAAgB,EAE3DE,GAAA,MAAAA,EAAY,iBAAiB,QAAS,IAAME,EAAYH,EAAM,EAAE,GAChEE,GAAA,MAAAA,EAAY,iBAAiB,QAAS,IAAME,EAAiBJ,EAAM,EAAE,EACvE,CAEA,SAASL,EAAkBI,EAAW,CACpCA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBxB,CAEA,eAAeI,EAAYE,EAAS,OAClC,GAAI,CACF,MAAMd,EAAO,MAAMe,EAAiBD,CAAO,EACrCE,EAAU,MAAM,SAAQb,EAAAH,GAAA,YAAAA,EAAM,OAAN,YAAAG,EAAY,OAAO,EAAIH,EAAK,KAAK,QAAUA,GAAA,YAAAA,EAAM,QACzEiB,EAAUD,GAAA,YAAAA,EAAS,KAAKE,GAAKA,EAAE,OAAS,WAAaA,EAAE,OAAS,WAClED,EACF,MAAM,YAAYA,EAAQ,GAAG,EAE7B,MAAM,YAAY,yBAA0B,MAAM,CAErD,OAAQV,EAAK,CACZ,QAAQ,MAAM,sBAAuBA,CAAG,EACxC,MAAM,YAAY,0BAA2B,OAAO,CACrD,CACH,CAEA,eAAeM,EAAiBC,EAAS,CACvC,GAAI,CACF,MAAMK,EAAM,MAAMC,EAAkBN,CAAO,EACrCL,GAAQU,GAAA,YAAAA,EAAK,OAAQA,EAC3B,MAAM,YAAYV,CAAK,CACxB,OAAQF,EAAK,CACZ,QAAQ,MAAM,uBAAwBA,CAAG,EACzC,MAAM,YAAY,qCAAsC,OAAO,CAChE,CACH,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,kBAAmBT,EAAiB,CAAE,KAAM,EAAI,CAAE,EAE5EA"}